(this["webpackJsonpreact-iot-farm"]=this["webpackJsonpreact-iot-farm"]||[]).push([[0],{160:function(e,t,c){},229:function(e,t,c){},375:function(e,t,c){},383:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c.n(a),r=c(55),n=c.n(r),i=(c(229),c(45)),o=c(22),j=c(16),l=c(216),d=(c(234),c(235),l.a.initializeApp({apiKey:"AIzaSyAiwH27lqG8IDR8hbC9bcD6D33IMDSlOGk",authDomain:"nodemcu-iot-a8e67.firebaseapp.com",databaseURL:"https://nodemcu-iot-a8e67.firebaseio.com",projectId:"nodemcu-iot-a8e67",storageBucket:"nodemcu-iot-a8e67.appspot.com",messagingSenderId:"274516753894",appId:"1:274516753894:web:c90e0e85fdbf9c3b75ea27",measurementId:"G-EJM7DLNVX7"})),b=d.auth(),u=d.database(),O=d.firestore(),x=c(3),h=s.a.createContext(),m=function(){return Object(a.useContext)(h)},p=function(e){var t=e.children,c=Object(a.useState)(),s=Object(j.a)(c,2),r=s[0],n=s[1],i=Object(a.useState)(!0),o=Object(j.a)(i,2),l=o[0],d=o[1];Object(a.useEffect)((function(){return b.onAuthStateChanged((function(e){n(e),d(!1)}))}),[]);var u={currentUser:r,login:function(e,t){return b.signInWithEmailAndPassword(e,t)},signup:function(e,t,c){return b.createUserWithEmailAndPassword(e,t).then((function(t){O.collection("users").doc(t.user.uid).set({email:e,deviceIds:c})}))},logout:function(){return b.signOut()},resetPassword:function(e){return b.sendPasswordResetEmail(e)}};return Object(x.jsx)(h.Provider,{value:u,children:!l&&t})},f=c(395),v=c(27),g=c.n(v),w=c(41),N=c(212),y=c.n(N),k=c(408),S=c(406),I=function(e){return Object(x.jsx)(s.a.Fragment,{children:Object(x.jsx)(k.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(x.jsxs)(f.a,{children:[Object(x.jsx)(k.a.Brand,{href:"#home",children:"IoT FARM"}),Object(x.jsx)(k.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(x.jsxs)(k.a.Collapse,{id:"responsive-navbar-nav",children:[Object(x.jsxs)(S.a,{className:"me-auto",children:[Object(x.jsx)(S.a.Link,{href:"#features",children:"Features"}),Object(x.jsx)(S.a.Link,{href:"#pricing",children:"Pricing"})]}),Object(x.jsxs)(S.a,{children:[Object(x.jsx)(S.a.Link,{href:"#deets",children:e.currentUser?e.currentUser.email:"No User/Device"}),Object(x.jsx)(S.a.Link,{onClick:e.handleLogout,children:"Logout"})]})]})]})})})},L=(c(160),c(5)),C=c.n(L),F=c(396),R=function(e){return Object(x.jsx)("div",{className:C()("card shadow h-100 py-2",e.color),children:Object(x.jsx)("div",{className:"card-body",children:Object(x.jsxs)("div",{className:"row no-gutters align-items-center",children:[Object(x.jsxs)("div",{className:"col mr-2",children:[Object(x.jsx)("div",{className:"text-xs font-weight-bold text-primary text-uppercase mb-1",children:e.text}),Object(x.jsx)("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:e.loading?e.value:Object(x.jsx)(F.a,{animation:"border"})})]}),Object(x.jsx)("div",{className:"col-auto",children:Object(x.jsx)("i",{className:C()("fa-2x text-gray-300",e.icon)})})]})})})},P=(c(397),c(398),c(402),c(210),c(211),c(102),c(99),c(218),c(375),function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),c=t[0],r=t[1],n=Object(a.useState)(!1),i=Object(j.a)(n,2),l=(i[0],i[1]),d=Object(a.useState)(""),b=Object(j.a)(d,2),u=(b[0],b[1],Object(a.useState)({})),h=Object(j.a)(u,2),p=(h[0],h[1],Object(a.useState)([])),f=Object(j.a)(p,2),v=(f[0],f[1],m()),N=v.logout,k=v.currentUser,S=Object(o.useHistory)(),L=Object(a.useState)([]),C=Object(j.a)(L,2),F=C[0],R=C[1];function P(){return(P=Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(""),e.prev=1,e.next=4,N();case 4:S.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r("cannot logout");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,O.collection("users").doc(k.uid).get().then((function(e){R(e.data().deviceIds)}));case 4:l(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0.message),l(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),Object(x.jsxs)(s.a.Fragment,{children:[Object(x.jsx)(I,{handleLogout:function(){return P.apply(this,arguments)},error:c,currentUser:k}),Object(x.jsxs)("div",{class:"container-fluid",children:[Object(x.jsx)("h2",{children:"My Devices"}),Object(x.jsx)("div",{class:"row flex-nowrap",children:F.map((function(e){return Object(x.jsxs)("div",{className:"card card-block",style:{width:"18rem",margin:"0px 10px 0px 10px"},children:[Object(x.jsx)("img",{className:"card-img-top",src:"https://i.imgur.com/73cwR7F.jpg",alt:"Card image cap"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("h5",{className:"card-title",children:e.deviceId}),Object(x.jsx)("p",{className:"card-text",children:"Some quick example text to build on the card title and make up the bulk of the card's content."}),Object(x.jsx)(y.a,{to:"/profile/".concat(e.deviceId),className:"btn btn-primary",children:"View More"})]})]},e.id)}))})]})]})}),D=c(47),U=c(214),E=c.n(U),A=c(215),G=c.n(A),M=c(409),_=c(411),B=c(410),H=c(405),T=c(403),z=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=Object(a.useRef)(),s=m().signup,r=Object(a.useState)(""),n=Object(j.a)(r,2),l=n[0],d=n[1],b=Object(a.useState)(!1),u=Object(j.a)(b,2),O=u[0],h=u[1],p=Object(o.useHistory)(),f=Object(a.useState)([{id:Object(M.a)(),deviceId:""}]),v=Object(j.a)(f,2),N=v[0],y=v[1];function k(){return(k=Object(w.a)(g.a.mark((function a(r){var n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.preventDefault(),t.current.value===c.current.value){a.next=3;break}return a.abrupt("return",d("Passwords should be match!!!"));case 3:n={email:e.current.value,password:t.current.value,deviceIds:N},console.log(n);try{d(""),h(!0),s(n.email,n.password,n.deviceIds),p.push("/login")}catch(i){d("Failed to create an account, Make sure you are connected to internet!")}h(!1);case 7:case"end":return a.stop()}}),a)})))).apply(this,arguments)}var S=function(){y([].concat(Object(D.a)(N),[{id:Object(M.a)(),deviceId:""}]))};return Object(x.jsxs)("div",{children:[Object(x.jsx)(_.a,{style:{width:"350px"},children:Object(x.jsxs)(_.a.Body,{children:[Object(x.jsx)("h2",{className:"text-center mb-4",children:"Sign Up"}),l&&Object(x.jsx)(B.a,{variant:"danger",children:l}),Object(x.jsxs)(H.a,{onSubmit:function(e){return k.apply(this,arguments)},children:[Object(x.jsxs)(H.a.Group,{className:"mt-4",id:"email",children:[Object(x.jsx)(H.a.Label,{children:"Email"}),Object(x.jsx)(H.a.Control,{type:"email",ref:e})]}),Object(x.jsxs)(H.a.Group,{className:"mt-4",id:"deviceId",children:[Object(x.jsx)(H.a.Label,{children:"Your Farms"}),N.map((function(e){return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-md-8",children:Object(x.jsx)(H.a.Control,{name:"deviceId",placeholder:"Enter Device ID",variant:"filled",value:e.deviceId,onChange:function(t){return function(e,t){var c=N.map((function(c){return e===c.id&&(c[t.target.name]=t.target.value),c}));y(c)}(e.id,t)}})}),Object(x.jsx)("div",{className:"col-md-4",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-md-2",onClick:S,children:Object(x.jsx)(E.a,{})}),Object(x.jsx)("div",{className:"col-md-2",disabled:1===N.length,onClick:function(){return function(e){var t=Object(D.a)(N);t.splice(t.findIndex((function(t){return t.id===e})),1),y(t)}(e.id)},children:Object(x.jsx)(G.a,{})})]})})]})},e.id)}))]}),Object(x.jsxs)(H.a.Group,{className:"mt-4",id:"password",children:[Object(x.jsx)(H.a.Label,{children:"Password"}),Object(x.jsx)(H.a.Control,{type:"password",ref:t})]}),Object(x.jsxs)(H.a.Group,{className:"mt-4",id:"confirm-password",children:[Object(x.jsx)(H.a.Label,{children:"Confirm Password"}),Object(x.jsx)(H.a.Control,{type:"password",ref:c})]}),Object(x.jsx)(T.a,{disabled:O,className:"w-100 mt-4",type:"submit",children:"Sign Up"})]})]})}),Object(x.jsxs)("div",{className:"w-100 text-center mt-4",children:["Already have an account? ",Object(x.jsx)(i.b,{to:"/login",children:" Log In"})]})]})},J=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=m().login,r=Object(a.useState)(""),n=Object(j.a)(r,2),l=n[0],d=n[1],b=Object(a.useState)(!1),u=Object(j.a)(b,2),O=u[0],h=u[1],p=Object(o.useHistory)();function f(){return(f=Object(w.a)(g.a.mark((function a(s){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s.preventDefault(),a.prev=1,d(""),h(!0),a.next=6,c(e.current.value,t.current.value);case 6:p.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),d("Failed to sign in!");case 12:h(!1);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))).apply(this,arguments)}return Object(x.jsxs)(s.a.Fragment,{children:[Object(x.jsx)(_.a,{style:{width:"350px"},children:Object(x.jsxs)(_.a.Body,{children:[Object(x.jsx)("h2",{className:"text-center mb-4",children:"Log In"}),l&&Object(x.jsx)(B.a,{variant:"danger",children:l}),Object(x.jsxs)(H.a,{onSubmit:function(e){return f.apply(this,arguments)},children:[Object(x.jsxs)(H.a.Group,{className:"mt-4",id:"email",children:[Object(x.jsx)(H.a.Label,{children:"Email"}),Object(x.jsx)(H.a.Control,{type:"email",ref:e})]}),Object(x.jsxs)(H.a.Group,{className:"mt-4",id:"password",children:[Object(x.jsx)(H.a.Label,{children:"Password"}),Object(x.jsx)(H.a.Control,{type:"password",ref:t})]}),Object(x.jsx)(T.a,{disabled:O,className:"w-100 mt-4",type:"submit",children:"Login"})]})]})}),Object(x.jsx)("div",{className:"w-100 text-center mt-4",children:Object(x.jsx)(i.b,{to:"/forgot-password",children:"Forogot Password?"})}),Object(x.jsxs)("div",{className:"w-100 text-center mt-4",children:["Need an account? ",Object(x.jsx)(i.b,{to:"/signup",children:"Sign Up"})]})]})},V=c(124),W=c(219),q=["component"],Y=function(e){var t=e.component,c=Object(W.a)(e,q),a=m().currentUser;return Object(x.jsx)("div",{children:Object(x.jsx)(o.Route,Object(V.a)(Object(V.a)({},c),{},{render:function(e){return a?Object(x.jsx)(t,Object(V.a)({},e)):Object(x.jsx)(o.Redirect,{to:"/login"})}}))})},K=function(){var e=Object(a.useRef)(),t=m().resetPassword,c=Object(a.useState)(""),r=Object(j.a)(c,2),n=r[0],o=r[1],l=Object(a.useState)(""),d=Object(j.a)(l,2),b=d[0],u=d[1],O=Object(a.useState)(!1),h=Object(j.a)(O,2),p=h[0],f=h[1];function v(){return(v=Object(w.a)(g.a.mark((function c(a){return g.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a.preventDefault(),c.prev=1,o(""),f(!0),c.next=6,t(e.current.value);case 6:u("Check Your email inbox to reset password link!"),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),o("Failed to reset password");case 12:f(!1);case 13:case"end":return c.stop()}}),c,null,[[1,9]])})))).apply(this,arguments)}return Object(x.jsxs)(s.a.Fragment,{children:[Object(x.jsx)(_.a,{style:{width:"350px"},children:Object(x.jsxs)(_.a.Body,{children:[Object(x.jsx)("h2",{className:"text-center mb-4",children:"Forgot Password"}),n&&Object(x.jsx)(B.a,{variant:"danger",children:n}),b&&Object(x.jsx)(B.a,{variant:"success",children:b}),Object(x.jsxs)(H.a,{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(x.jsxs)(H.a.Group,{className:"mt-4",id:"email",children:[Object(x.jsx)(H.a.Label,{children:"Email"}),Object(x.jsx)(H.a.Control,{type:"email",ref:e})]}),Object(x.jsx)(T.a,{disabled:p,className:"w-100 mt-4",type:"submit",children:"Reset Password"})]})]})}),Object(x.jsx)("div",{className:"w-100 text-center mt-4",children:Object(x.jsx)(i.b,{to:"/login",children:"Back to login"})})]})},X=c(412),Q=function(e){return Object(x.jsx)("div",{className:C()("card shadow h-100 py-2",e.color),children:Object(x.jsx)("div",{className:"card-body",children:Object(x.jsxs)("div",{className:"row no-gutters align-items-center",children:[Object(x.jsxs)("div",{className:"col mr-2",children:[Object(x.jsx)("div",{className:"text-xs font-weight-bold text-primary text-uppercase mb-1",children:e.text}),Object(x.jsx)(X.a,{now:e.value/5*100,label:"".concat(e.value/5*100,"%")})]}),Object(x.jsx)("div",{className:"col-auto",children:Object(x.jsx)("i",{className:C()("fa-2x text-gray-300",e.icon)})})]})})})},Z=c(404),$=c(213),ee=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),c=t[0],r=t[1],n=Object(a.useState)(!1),i=Object(j.a)(n,2),l=i[0],d=i[1],b=Object(a.useState)(0),O=Object(j.a)(b,2),h=O[0],p=(O[1],Object(a.useState)({})),v=Object(j.a)(p,2),N=v[0],y=v[1],k=Object(a.useState)([]),S=Object(j.a)(k,2);S[0],S[1];console.log(Object(o.useParams)());var L=m(),C=L.logout,P=L.currentUser,D=Object(o.useHistory)();function U(){return(U=Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(""),e.prev=1,e.next=4,C();case 4:D.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r("cannot logout");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}console.log(h);var E=Object(o.useParams)().deviceId;function A(){return G.apply(this,arguments)}function G(){return(G=Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(N&&N.moisture<=30)){e.next=4;break}return e.next=4,u.ref("FirebaseIOT/Live_data/"+E).update({motor_status:1});case 4:if(!(N&&N.moisture>30)){e.next=9;break}return e.next=7,u.ref("FirebaseIOT/Live_data/"+E).update({motor_status:0});case 7:e.next=9;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}Object(a.useEffect)((function(){Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.ref("FirebaseIOT/Live_data/"+E).on("value",(function(e){y(e.val())}));case 3:d(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}),[]),Object(a.useEffect)((function(){A()}),[A]);return Object(x.jsxs)(s.a.Fragment,{children:[Object(x.jsx)(I,{handleLogout:function(){return U.apply(this,arguments)},error:c,currentUser:P}),Object(x.jsxs)(f.a,{children:[Object(x.jsxs)(Z.a,{className:"mt-4",children:[Object(x.jsx)($.a,{children:Object(x.jsx)("h1",{children:"Current Stats"})}),Object(x.jsx)($.a,{className:"text-right",children:Object(x.jsxs)("h1",{children:["My Device : ",l?E:Object(x.jsx)(F.a,{animation:"grow"})]})})]}),Object(x.jsx)("hr",{}),Object(x.jsx)("br",{}),Object(x.jsxs)(f.a,{children:[Object(x.jsxs)(Z.a,{children:[Object(x.jsx)($.a,{sm:!0,children:Object(x.jsx)(R,{color:"border-left-primary",text:"Humidity",icon:"fas fa-tint",value:"".concat(10*N.humidity,"%"),loading:l})}),Object(x.jsx)("div",{className:"mobile-space",children:Object(x.jsx)("br",{})}),Object(x.jsx)($.a,{sm:!0,children:Object(x.jsx)(R,{color:"border-left-success",text:"Temperature",icon:"fas fa-thermometer-half",value:"".concat(N.temperature," \xb0C"),loading:l})}),Object(x.jsx)("div",{className:"mobile-space",children:Object(x.jsx)("br",{})}),Object(x.jsx)($.a,{sm:!0,children:Object(x.jsx)(R,{color:"border-left-success",text:"Moisture",icon:"fas fa-water",value:N.moisture,loading:l})}),Object(x.jsx)("div",{className:"mobile-space",children:Object(x.jsx)("br",{})}),Object(x.jsx)("div",{className:"mobile-space",children:Object(x.jsx)("br",{})})]}),Object(x.jsx)("br",{}),Object(x.jsxs)(Z.a,{children:[Object(x.jsx)($.a,{sm:!0,children:Object(x.jsx)(R,{color:"border-left-success",text:"Light",icon:"fas fa-lightbulb",value:N.light,loading:l})}),Object(x.jsx)($.a,{sm:!0,children:Object(x.jsx)(R,{color:"border-left-warning",text:"Solar Status",icon:"fas fa-solar-panel",value:N.solar_status,loading:l})})]}),Object(x.jsx)("br",{}),Object(x.jsxs)(Z.a,{children:[Object(x.jsx)($.a,{sm:!0,children:Object(x.jsx)(R,{color:"border-left-success",text:"Motor",icon:"fas fa-water",value:N.motor_status?"ON":"OFF",loading:l})}),Object(x.jsx)($.a,{sm:!0,children:Object(x.jsx)(R,{color:"border-left-success",text:"Fertilizer Status",icon:"fas fa-hand-holding-seedling",value:N.fertilizer_status?"Applied":"Not Applied",loading:l})}),Object(x.jsx)($.a,{sm:!0,children:Object(x.jsx)(Q,{color:"border-left-danger",text:"Voltage",icon:"fas fa-bolt",value:N.voltage,loading:l})})]}),Object(x.jsx)("br",{}),Object(x.jsx)(Z.a,{})]})]})]})},te=function(){return Object(x.jsx)(s.a.Fragment,{children:Object(x.jsx)(i.a,{children:Object(x.jsx)(p,{children:Object(x.jsxs)(o.Switch,{children:[Object(x.jsx)(Y,{exact:!0,path:"/",component:P}),Object(x.jsx)(o.Route,{path:"/profile/:deviceId",exact:!0,component:ee}),Object(x.jsx)(f.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(x.jsxs)("div",{className:"w-200",style:{maxWidth:"400px"},children:[Object(x.jsx)(o.Route,{path:"/signup",exact:!0,component:z}),Object(x.jsx)(o.Route,{path:"/login",exact:!0,component:J}),Object(x.jsx)(o.Route,{path:"/forgot-password",exact:!0,component:K})]})})]})})})})};n.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(te,{})}),document.getElementById("root"))}},[[383,1,2]]]);
//# sourceMappingURL=main.2321f890.chunk.js.map