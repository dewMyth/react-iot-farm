(this["webpackJsonpreact-iot-farm"]=this["webpackJsonpreact-iot-farm"]||[]).push([[0],{61:function(e,t,c){},75:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),r=c(33),s=c.n(r),i=(c(61),c(22)),j=c(11),o=c(15),l=c(55),u=(c(66),c(67),l.a.initializeApp({apiKey:"AIzaSyAiwH27lqG8IDR8hbC9bcD6D33IMDSlOGk",authDomain:"nodemcu-iot-a8e67.firebaseapp.com",databaseURL:"https://nodemcu-iot-a8e67.firebaseio.com",projectId:"nodemcu-iot-a8e67",storageBucket:"nodemcu-iot-a8e67.appspot.com",messagingSenderId:"274516753894",appId:"1:274516753894:web:c90e0e85fdbf9c3b75ea27",measurementId:"G-EJM7DLNVX7"})),d=u.auth(),b=u.database(),O=u.firestore(),h=c(4),x=n.a.createContext(),p=function(){return Object(a.useContext)(x)},m=function(e){var t=e.children,c=Object(a.useState)(),n=Object(o.a)(c,2),r=n[0],s=n[1],i=Object(a.useState)(!0),j=Object(o.a)(i,2),l=j[0],u=j[1];Object(a.useEffect)((function(){return d.onAuthStateChanged((function(e){s(e),u(!1)}))}),[]);var b={currentUser:r,login:function(e,t){return d.signInWithEmailAndPassword(e,t)},signup:function(e,t,c){return d.createUserWithEmailAndPassword(e,t).then((function(t){O.collection("users").doc(t.user.uid).set({email:e,deviceId:c})}))},logout:function(){return d.signOut()},resetPassword:function(e){return d.sendPasswordResetEmail(e)}};return Object(h.jsx)(x.Provider,{value:b,children:!l&&t})},f=c(77),v=c(20),g=c.n(v),w=c(25),y=c(81),N=c(80),S=function(e){return Object(h.jsx)(n.a.Fragment,{children:Object(h.jsx)(y.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(h.jsxs)(f.a,{children:[Object(h.jsx)(y.a.Brand,{href:"#home",children:"IoT FARM"}),Object(h.jsx)(y.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(h.jsxs)(y.a.Collapse,{id:"responsive-navbar-nav",children:[Object(h.jsxs)(N.a,{className:"me-auto",children:[Object(h.jsx)(N.a.Link,{href:"#features",children:"Features"}),Object(h.jsx)(N.a.Link,{href:"#pricing",children:"Pricing"})]}),Object(h.jsxs)(N.a,{children:[Object(h.jsx)(N.a.Link,{href:"#deets",children:e.currentUser?e.currentUser.email:"No User/Device"}),Object(h.jsx)(N.a.Link,{onClick:e.handleLogout,children:"Logout"})]})]})]})})})},k=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),c=t[0],r=t[1],s=Object(a.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(a.useState)({}),x=Object(o.a)(d,2),m=x[0],v=x[1],y=p(),N=y.logout,k=y.currentUser,L=Object(j.g)();function I(){return(I=Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(""),e.prev=1,e.next=4,N();case 4:L.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r("cannot logout");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){O.collection("users").doc(k.uid).get().then((function(e){u(e.data().deviceId),null===l||b.ref("FirebaseIOT/Live_data/"+e.data().deviceId).on("value",(function(e){v(e.val())}))}))})),Object(h.jsxs)(n.a.Fragment,{children:[Object(h.jsx)(S,{handleLogout:function(){return I.apply(this,arguments)},error:c,currentUser:k}),Object(h.jsx)(f.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(h.jsx)("div",{className:"w-200",style:{maxWidth:"400px"},children:Object(h.jsxs)("h1",{children:["My Device = ",l,Object(h.jsx)("br",{}),"Humidity = ",m.solar_status]})})})]})},L=c(83),I=c(82),C=c(79),P=c(78),D=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=Object(a.useRef)(),n=Object(a.useRef)(),r=p().signup,s=Object(a.useState)(""),l=Object(o.a)(s,2),u=l[0],d=l[1],b=Object(a.useState)(!1),O=Object(o.a)(b,2),x=O[0],m=O[1],f=Object(j.g)();function v(){return(v=Object(w.a)(g.a.mark((function a(s){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s.preventDefault(),c.current.value===n.current.value){a.next=3;break}return a.abrupt("return",d("Passwords should be match!!!"));case 3:try{d(""),m(!0),r(e.current.value,c.current.value,t.current.value),f.push("/login")}catch(i){d("Failed to create an account, Make sure you are connected to internet!")}m(!1);case 5:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(h.jsxs)("div",{children:[Object(h.jsx)(L.a,{style:{width:"350px"},children:Object(h.jsxs)(L.a.Body,{children:[Object(h.jsx)("h2",{className:"text-center mb-4",children:"Sign Up"}),u&&Object(h.jsx)(I.a,{variant:"danger",children:u}),Object(h.jsxs)(C.a,{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(h.jsxs)(C.a.Group,{className:"mt-4",id:"email",children:[Object(h.jsx)(C.a.Label,{children:"Email"}),Object(h.jsx)(C.a.Control,{type:"email",ref:e})]}),Object(h.jsxs)(C.a.Group,{className:"mt-4",id:"deviceId",children:[Object(h.jsx)(C.a.Label,{children:"Device ID"}),Object(h.jsx)(C.a.Control,{type:"text",placeholder:"Ex : 1001",ref:t})]}),Object(h.jsxs)(C.a.Group,{className:"mt-4",id:"password",children:[Object(h.jsx)(C.a.Label,{children:"Password"}),Object(h.jsx)(C.a.Control,{type:"password",ref:c})]}),Object(h.jsxs)(C.a.Group,{className:"mt-4",id:"confirm-password",children:[Object(h.jsx)(C.a.Label,{children:"Confirm Password"}),Object(h.jsx)(C.a.Control,{type:"password",ref:n})]}),Object(h.jsx)(P.a,{disabled:x,className:"w-100 mt-4",type:"submit",children:"Sign Up"})]})]})}),Object(h.jsxs)("div",{className:"w-100 text-center mt-4",children:["Already have an account?  ",Object(h.jsx)(i.b,{to:"/login",children:" Log In"})]})]})},F=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=p().login,r=Object(a.useState)(""),s=Object(o.a)(r,2),l=s[0],u=s[1],d=Object(a.useState)(!1),b=Object(o.a)(d,2),O=b[0],x=b[1],m=Object(j.g)();function f(){return(f=Object(w.a)(g.a.mark((function a(n){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,u(""),x(!0),a.next=6,c(e.current.value,t.current.value);case 6:m.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),u("Failed to sign in!");case 12:x(!1);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))).apply(this,arguments)}return Object(h.jsxs)(n.a.Fragment,{children:[Object(h.jsx)(L.a,{style:{width:"350px"},children:Object(h.jsxs)(L.a.Body,{children:[Object(h.jsx)("h2",{className:"text-center mb-4",children:"Log In"}),l&&Object(h.jsx)(I.a,{variant:"danger",children:l}),Object(h.jsxs)(C.a,{onSubmit:function(e){return f.apply(this,arguments)},children:[Object(h.jsxs)(C.a.Group,{className:"mt-4",id:"email",children:[Object(h.jsx)(C.a.Label,{children:"Email"}),Object(h.jsx)(C.a.Control,{type:"email",ref:e})]}),Object(h.jsxs)(C.a.Group,{className:"mt-4",id:"password",children:[Object(h.jsx)(C.a.Label,{children:"Password"}),Object(h.jsx)(C.a.Control,{type:"password",ref:t})]}),Object(h.jsx)(P.a,{disabled:O,className:"w-100 mt-4",type:"submit",children:"Login"})]})]})}),Object(h.jsx)("div",{className:"w-100 text-center mt-4",children:Object(h.jsx)(i.b,{to:"/forgot-password",children:"Forogot Password?"})}),Object(h.jsxs)("div",{className:"w-100 text-center mt-4",children:["Need an account? ",Object(h.jsx)(i.b,{to:"/signup",children:"Sign Up"})]})]})},R=c(41),U=c(56),E=["component"],G=function(e){var t=e.component,c=Object(U.a)(e,E),a=p().currentUser;return Object(h.jsx)("div",{children:Object(h.jsx)(j.b,Object(R.a)(Object(R.a)({},c),{},{render:function(e){return a?Object(h.jsx)(t,Object(R.a)({},e)):Object(h.jsx)(j.a,{to:"/login"})}}))})},A=function(){var e=Object(a.useRef)(),t=p().resetPassword,c=Object(a.useState)(""),r=Object(o.a)(c,2),s=r[0],j=r[1],l=Object(a.useState)(""),u=Object(o.a)(l,2),d=u[0],b=u[1],O=Object(a.useState)(!1),x=Object(o.a)(O,2),m=x[0],f=x[1];function v(){return(v=Object(w.a)(g.a.mark((function c(a){return g.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a.preventDefault(),c.prev=1,j(""),f(!0),c.next=6,t(e.current.value);case 6:b("Check Your email inbox to reset password link!"),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),j("Failed to reset password");case 12:f(!1);case 13:case"end":return c.stop()}}),c,null,[[1,9]])})))).apply(this,arguments)}return Object(h.jsxs)(n.a.Fragment,{children:[Object(h.jsx)(L.a,{style:{width:"350px"},children:Object(h.jsxs)(L.a.Body,{children:[Object(h.jsx)("h2",{className:"text-center mb-4",children:"Forgot Password"}),s&&Object(h.jsx)(I.a,{variant:"danger",children:s}),d&&Object(h.jsx)(I.a,{variant:"success",children:d}),Object(h.jsxs)(C.a,{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(h.jsxs)(C.a.Group,{className:"mt-4",id:"email",children:[Object(h.jsx)(C.a.Label,{children:"Email"}),Object(h.jsx)(C.a.Control,{type:"email",ref:e})]}),Object(h.jsx)(P.a,{disabled:m,className:"w-100 mt-4",type:"submit",children:"Reset Password"})]})]})}),Object(h.jsx)("div",{className:"w-100 text-center mt-4",children:Object(h.jsx)(i.b,{to:"/login",children:"Back to login"})})]})},B=function(){return Object(h.jsx)(n.a.Fragment,{children:Object(h.jsx)(i.a,{children:Object(h.jsx)(m,{children:Object(h.jsxs)(j.d,{children:[Object(h.jsx)(G,{exact:!0,path:"/",component:k}),Object(h.jsx)(f.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(h.jsxs)("div",{className:"w-200",style:{maxWidth:"400px"},children:[Object(h.jsx)(j.b,{path:"/signup",exact:!0,component:D}),Object(h.jsx)(j.b,{path:"/login",exact:!0,component:F}),Object(h.jsx)(j.b,{path:"/forgot-password",exact:!0,component:A})]})})]})})})})};s.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(B,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.ad89d875.chunk.js.map